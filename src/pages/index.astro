---
import Header from "../components/Header.astro";
import Layout from "../layouts/Layout.astro";
import LatestArticles from "../components/LatestArticles.astro";
import CollectionsPreview from "../components/CollectionsPreview.astro";
import { getBlogPosts } from "../store/blog";
import { ArrowRight, BookOpen } from "@lucide/astro";
import { Image } from "astro:assets";
import Footer from "../components/Footer.astro";
import CollectionSection from "../components/CollectionSection.astro";

const { featuredPost, otherPosts } = await getBlogPosts();
---

<Layout>
	<Header />
	<main class="flex flex-col gap-5 pb-20">
		<div class="space-y-6">
			<div class="flex items-center justify-center py-4 flex-col gap-2">
				<h2
					class="flex gap-2 mt-10 text-lg items-center animate-bounce"
				>
					Review collections <ArrowRight size={15} />
				</h2>
				<h1 class="text-[6rem] font-bold italic text-stone-800">
					Streamline the core
				</h1>
			</div>
			<div class="flex gap-10 min-h-120">
				<div
					class="w-90 bg-primary relative shadow-lg flex-col flex items-center justify-center"
				>
					<div
						class="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -mr-40 -mt-40"
					>
					</div>
					<div
						class="absolute bottom-0 left-0 w-64 h-64 bg-white/20 rounded-full -ml-32 -mb-32"
					>
					</div>

					<BookOpen size={30} />
					<h1 class="text-4xl font-bold">Collections</h1>
					<p>Browse all 4 collections</p>
				</div>
				<a
					href={`/blog/${featuredPost.data.slug}`}
					class="group flex gap-6 bg-linear-to-r flex-1 from-primary/10 to-transparent overflow-hidden shadow-lg hover:shadow-xl transition-shadow"
				>
					{/* Content - Left Side */}
					<div class="flex flex-col justify-between p-8 w-1/3 py-10">
						<div>
							<span
								class="inline-block bg-primary/80 px-3 py-1 rounded-full text-xs font-semibold mb-4 text-white"
							>
								Featured
							</span>
							<h3
								class="text-4xl font-bold line-clamp-3 group-hover:text-primary transition-colors"
							>
								{featuredPost.data.title}
							</h3>
							<p class="text-base mt-4 opacity-90 line-clamp-3">
								{featuredPost.data.description}
							</p>
						</div>
						<time class="text-sm opacity-75 block">
							{
								new Date(
									featuredPost.data.pubDate,
								).toLocaleDateString("es-ES")
							}
						</time>
					</div>

					{/* Image - Right Side */}
					<div class="flex-1 overflow-hidden">
						{
							featuredPost.data.heroImage && (
								<Image
									src={featuredPost.data.heroImage}
									alt={featuredPost.data.title}
									class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
								/>
							)
						}
					</div>
				</a>
			</div>

			<div class="mt-20 bg-card p-10">
				<div class="w-full flex items-center justify-between mb-10">
					<h4 class="text-[2rem] italic font-bold">View More</h4>
				</div>
				<div class="">
					<CollectionSection
						cols={"md:grid-cols-2 lg:grid-cols-3"}
						posts={otherPosts.splice(0, 3)}
					/>
				</div>
			</div>
		</div>
	</main>

	<Footer />
</Layout>
